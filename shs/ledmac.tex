\chapter{Édition critique et bilingue : les packages \packagenoidx{ledmac}\sindex[pkg]{ledmac} et \packagenoidx{ledpar}\sindex[pkg]{lepar}}
\label{ledmac}
\sindex[pkg]{verse}

attention > version donnée par la textLive 2011 n'est pas la bonne: il faut mettre à jour  (aller sur site du ctan)

\section{Faire une édition critique avec \package{ledmac}}

\subsection{Numéroter un texte}

Le texte dont on veut numéroter les lignes est encadré entre les commandes \cs{beginnumbering} et \cs{endnumbering}. Il faut ensuite faire une distinction entre les textes en prose et les textes en vers. 

\subsubsection{Numéroter un texte en prose}


On débute la numérotation, au sein de cet environnement numbering, avec la commande \cs{pstart} et on la termine avec la commande \cs{pend} (le texte contenu entre ces deux commande est mis dans une \enquote{boite}), comme dans l'exemple suivant:

\begin{minted}{latex}
\beginnumbering
\pstart %commencer la numérotation
Lorem ipsum dolor sit amet, consectetuer adipiscing elit ?
Morbi commodo ; ipsum sed pharetra gravida !
Nullam sit amet enim. Suspendisse id : velit vitae ligula.
Aliquam erat volutpat.

Sed quis velit. Nulla facilisi. Nulla libero. 
Quisque facilisis erat a dui. 
Nam malesuada ornare dolor.
Cras gravida, diam sit amet rhoncus ornare, 
erat  elit consectetuer erat, id egestas pede nibh eget odio.
\pend %terminer la numérotation
\endnumbering
\end{minted}

On obtiens ainsi : 

\begin{minipage}{10cm}
\beginnumbering
\pstart %commencer la numérotation
Lorem ipsum dolor sit amet, consectetuer adipiscing elit ?
Morbi commodo ; ipsum sed pharetra gravida !
Nullam sit amet enim. Suspendisse id : velit vitae ligula. 
Aliquam erat volutpat.\pend

Sed quis velit. Nulla facilisi. Nulla libero. 
 Quisque facilisis erat a dui. % onreprend la numérotation
Nam malesuada ornare dolor.
Cras gravida, diam sit amet rhoncus ornare, 
erat  elit consectetuer erat, id egestas pede nibh eget odio.
\pend
\endnumbering
\end{minipage}

%la doc dit qu'il faut à chaque paragraphe remettere pstart/pend , et qu'on peut empêcher cette inconvénient en créant un groupe et avec la commande autopar. Pourtant marche très bien sur plusieurs paragarphes à la suit sans passer par cette commande.. à voir!

Si l'on veut interrompre puis reprendre la numérotation où on l'a interrompu, il suffit de faire deux \enquote{boites} encadrée entre \cs{pstart} et \cs{pend}:  tout ce qui sera entre ces deux boites ne sera pas numéroté.

\subsubsection{\package{ledmac} et les vers}

La  numérotation dans les textes en prose ne se fait pas de la même façon. Les commandes \cs{pstart} et \cs{pend}. A la place, on découpe son texte en strophes (\enquote{stanza}). Pour commencer la numérotation, on met donc la commande \cs{stanza}. Chaque vers se termine par un & , et le dernier vers de la strophe par \cs{&}.  Mais il faut aussi indiquer l'indentation de chaque vers de la strophe (faute de quoi on obtiens le message \enquote{Missing number}). On utilise pour cela la commande \cs{setstanzaindents}\marg{$n_1 n_2 n_x$}. L'argument \arg{$n_1$} indique l'indentation du rejet si le vers est trop long pour tenir sur une seule ligne; \arg{$n_1$} correspond au premier vers, \arg{$n_2$} au deuxième et ainsi de suite.


exemple: 

\begin{minted}{latex}
\beginnumbering
\setstanzaindents{0,0,4,0,0,0,2,2,2,8}
\let\endstanzaextra=\bigbreak
\stanza
Berlin setz an.&
Es Speien die Geschäfte&
die wackern Knaben und die Mädchen aus.&
Die großen Fraun sind ganz auf neu gemalen.&
Wer wird heut abend wohl dem zimt bezahlen?&
Sie lächeln lieb. Das Auto summt heran.&
Berlin setz an.\&
\stanza
Berlin brummt auf.&
Wo ich die Paare anseh:&
Hier wird ein harter Dienst straff absolviert.&
Ein Riesenrummel von Grünau bis Wannsee ---&
und alles tadellos organisiert.&
Um jeden Schnapstich fühlst du es bestätigt:&
Marie stark Geld --- heute wird das Ding getätigt!&
Die Spesen fest. Planmäßig der Verlauf ---&
Berlin brust auf.&
\endnumbering
\end{minted}


\cs{\endstanzaextra} permet d'ajouter quelque chose à la fin de chaque strophe.
Ex, comme ici: 
\verb|\let\endstanzaextra=\bigbreak| > ajoute un grand espace entre les strophes
(on peut ajouter bcp de chose: voir le manuel)
les nouvelles commande de maïeul > pour avoir le crochet


\subsubsection{Aller plus loin}
Comme on peut le voir dans les exemples précédants, Ledmac numérote par défaut toutes une ligne sur cinq. On peut changer cela très simplement avec les commande suivantes:
\cs{firstlinenum}\marg{nbre} et \cs{linenumincrement}\marg{nbre}.
L'argument \arg{nbre} de la commande \cs{firstlinenum} indique quelle est  la première ligne qui sera numérotée ; l'argument \arg{nbre} de la commande \cs{linenumincrement} définit la fréquence avec laquelle les lignes seront numérotés.On place ces commande après \cs{beginnumbering}. Ainsi, si l'on veut numéroter toutes les lignes en commençant par la première, il faut mettre \cs{linenumincrement}\marg{1} et \cs{firstlinenum}\marg{1} 




-faire des "sous-numérotation
> avec \cs{firstsublinenum} 
et \cs{sublinenumincrement}

changer le numéro des lignes

-où apparissent les numéro des ligne et comment

Un moyen pour ne pas encombrer la mémoire qd texte trop long : faire de plus petites sections numérotées. Mais si on met endnumbering ,  avec beginnumbering on recommencera la numérotation à zéro.  Utiliser à la place pausenumbering - resumenumbering > avec resume numbering la nmérotation reprend où elle s'était arrêté. Si on utilise ces commande essentiellement pour des question de mémoire conseil de faire une commande exprès: \verb|\newcommand{\memorybreak}{\pausenumbering\resumenumbering}|> plus qu'à mettre memorybreak de temps en temps dans le texte ..

\cs{lineation}\marg{arg} > \arg{page} > numérotation recommence à chaque page \arg{section} (par défut) : numérotation recommence à chaque section.
Possible aussi de changer l'endroit où apparit le numéro de page (par défaut ds la marge de gauche): \cs{linenummargin}\marg{arg}, dt les arguments peuvent être left, right, inner, ou outer

\cs{startsub} \cs{endsub} > ligne numérotés 10.1, 10.2, 10.3,.. et non 10, 11, 12 
\cs{setline}\marg{num} and \cs{advanceline}\marg{num} > modifier le numéro d'une ligne 
\cs{skipnumbering} > ne pas prendre en compte dans la numérotation telle ligne
On peut aussi changer façon dont apparaissent es numéro des lignes (voir doc)


\subsection{L'apparat critique}

Notes de bas de page se présentent de cette façon:  \cs{Afootnote}\marg{texte}. Il y en a 5 type: de A à E
.Idem 5 type de notes de fin, de \cs{Aendnote} à \cs{Eendnote}.
>ces notes appellent un lemme : le mot du texte qui apparaîtra ds la  note de bas de page. On fait une note de cette façon: \cs{edtext}\marg{lemme}\marg{commande}
Exemple: 
\begin{minted}{latex}
\beginnumbering 
\firstlinenum{1}
\linenumincrement{1}

 \pstart 

Lorem ipsum dolor sit amet, consectetuer adipiscing elit ?
Morbi commodo ; ipsum sed pharetra gravida !
Nullam sit amet enim. Suspendisse id : velit vitae ligula.
Aliquam erat volutpat.

Sed quis velit. Nulla facilisi. Nulla libero. 
Quisque facilisis erat a dui. 
Nam malesuada ornare dolor.
Cras gravida, diam sit amet rhoncus ornare, 
erat  elit consectetuer erat, id egestas pede nibh eget odio.
\pend
\endnumbering
\end{minted}

l'argument \arg{lemme} est repris dans la note de bas de page + indication de des lignes où il se trouve 
Quand le lemme est sur plsuieur ligne, comme ici, trop long de le mettre en entier dans le bas de page > On utilise alors la commande \cs{edtext}\marg{le lemme trop long}\{\cs{lemma}\marg{le lemme raccourci}\cs{Bfootnote\marg{la note}}\}

\begin{minted}{latex}
\beginnumbering 
\firstlinenum{1}
\linenumincrement{1}
\firstsublinenum{1} 
\sublinenumincrement{1}
 \pstart 
 \noindent
En effet autrefois \edtext{un puissant sage, roi illustre}{\Afootnote{Salomon}},\\
a sur un tel sujet prononcé ces paroles :\\
\edtext{« La vie éternelle est située à Sa droite,\\
et la gloire, la grandeur, la fortune à Sa gauche »}{\lemma{La vie \dots\ gauche}{\Bfootnote{\textit{Pr}, 3, 16 : \enquote{Longitudo dierum in dextera eius [sapientia] / Et in sinistra illius diuitiae et gloria }}}}.
\pend \endnumbering
\end{minted}
≠ \cs{footnoteA} (jusqu'à C) >notes normales



\section{Mettre deux textes en vis-à-vis: le \package{ledpar}}
\prealable{Le package \package{ledpar}, qui sert à mettre un texte et sa traduction en vis-à-vis, fonctionne avec \package{ledmac}}
