

\chapter{Faire une édition critique avec \package{ledmac} et \package{ledpac}}



attention > version donnée par la textLive 2011 n'est pas la bonne: il faut mettre à jour  (aller sur site du ctan)

\section{Faire une édition critique avec \package{ledmac}}

\subsection{Numéroter un texte}

Le texte dont on veut numéroter les lignes est encadré entre les commandes \cs{beginnumbering} et \cs{endnumbering}. Mais il faut ensuite faire une distinction entre les textes en prose et les textes en vers. 

\subsubsection{Numéroter un texte en prose}


On débute la numérotation des lignes, au sein de cet environnement numbering, avec la commande \cs{pstart} et on la termine avec la commande \cs{pend} (le texte contenu entre ces deux commandes est mis dans une \enquote{boite}), comme dans l'exemple suivant:

\begin{latexcode}
\beginnumbering
\pstart %commencer la numérotation
Lorem ipsum dolor sit amet, consectetuer adipiscing elit ?
Morbi commodo ; ipsum sed pharetra gravida !
Nullam sit amet enim. Suspendisse id : velit vitae ligula.
Aliquam erat volutpat.

Sed quis velit. Nulla facilisi. Nulla libero. 
Quisque facilisis erat a dui. 
Nam malesuada ornare dolor.
Cras gravida, diam sit amet rhoncus ornare, 
erat  elit consectetuer erat, id egestas pede nibh eget odio.
\pend %terminer la numérotation
\endnumbering
\end{latexcode}

On obtiens ainsi : \bigbreak

\begin{minipage}{10cm}
\beginnumbering
\pstart %commencer la numérotation
Lorem ipsum dolor sit amet, consectetuer adipiscing elit ?
Morbi commodo ; ipsum sed pharetra gravida !
Nullam sit amet enim. Suspendisse id : velit vitae ligula. 
Aliquam erat volutpat.


Sed quis velit. Nulla facilisi. Nulla libero. 
 Quisque facilisis erat a dui. % onreprend la numérotation
Nam malesuada ornare dolor.
Cras gravida, diam sit amet rhoncus ornare, 
erat  elit consectetuer erat, id egestas pede nibh eget odio.
\pend
\endnumbering
\end{minipage}
\bigbreak
%la doc dit qu'il faut à chaque paragraphe remettere pstart/pend , et qu'on peut empêcher cette inconvénient en créant un groupe et avec la commande autopar. Pourtant marche très bien sur plusieurs paragarphes à la suit sans passer par cette commande.. à voir!

Si l'on veut interrompre puis reprendre la numérotation, il suffit de faire deux \enquote{boites} encadrées chacune entre un  \cs{pstart} et un \cs{pend}:  tout ce qui sera entre ces deux boites ne sera pas numéroté.

\subsubsection{\package{ledmac} et les vers}

La  numérotation dans les textes en vers est un peu plus complexe. Les commandes \cs{pstart} et \cs{pend} disparaissent. A la place, on découpe son texte en strophes (\enquote{stanza}). Pour commencer la numérotation, on met donc la commande \cs{stanza}. Chaque vers se termine par un \ampersand , et le dernier vers de la strophe par \cs{\ampersand}.  

Il faut indiquer l'indentation de chaque vers de la strophe (faute de quoi on obtient le message \enquote{Missing number}), grâce à la commande \cs{setstanzaindents}\marg{$n_0, n_1, n_2, n_x$}. L'argument \arg{$n_0$} indique l'indentation du rejet si le vers est trop long pour tenir sur une seule ligne; \arg{$n_1$} correspond au premier vers, \arg{$n_2$} au deuxième et ainsi de suite.




\begin{latexcode}
\beginnumbering
\setstanzaindents{0,0,4,0,0,0,2,2,2,8}
\let\endstanzaextra=\bigbreak
\stanza
Berlin setz an.&
Es speien die Geschäfte&
die wackern Knaben und die Mädchen aus.&
Jetz kommt der Feierabend --- aber defte!&
Wir springen nur noch eben resch nach Haus.&
Die großen Fraun sind ganz auf neu gemalen.&
Wer wird heut abend wohl dem Zimt bezahlen?&
Sie lächeln lieb. Das Auto summt heran.&
Berlin setz an.\&

\stanza
Berlin brummt auf.&
Wo ich die Paare anseh:&
Hier wird ein harter Dienst straff absolviert.&
Ein Riesenrummel von Grünau bis Wannsee ---&
und alles tadellos organisiert.&
Um jeden Schnapstich fühlst du es bestätigt:&
Marie stark Geld --- heute wird das Ding getätigt!&
Die Spesen fest. Planmäßig der Verlauf ---&
Berlin brust auf.\&
\endnumbering
\end{latexcode}

donne ainsi: 

\beginnumbering
\setstanzaindents{0,0,4,0,0,0,2,2,2,8}
\let\endstanzaextra=\bigbreak
\stanza
Berlin setz an.&
Es speien die Geschäfte&
die wackern Knaben und die Mädchen aus.&
Jetz kommt der Feierabend --- aber defte!&
Wir springen nur noch eben resch nach Haus.&
Die großen Fraun sind ganz auf neu gemalen.&
Wer wird heut abend wohl dem Zimt bezahlen?&
Sie lächeln lieb. Das Auto summt heran.&
Berlin setz an.\&

\stanza
Berlin brummt auf.&
Wo ich die Paare anseh:&
Hier wird ein harter Dienst straff absolviert.&
Ein Riesenrummel von Grünau bis Wannsee ---&
und alles tadellos organisiert.&
Um jeden Schnapstich fühlst du es bestätigt:&
Marie stark Geld --- heute wird das Ding getätigt!&
Die Spesen fest. Planmäßig der Verlauf ---&
Berlin brust auf.\&
\endnumbering

(berliner abend, kurt tuchovsky)

La commande\cs{endstanzaextra} permet d'ajouter quelque chose à la fin de chaque strophe.
Dans l'exemple qui précède, l'espace vertical entre chaque  stropheest ainsi obtenu par la ligne \verb|\let\endstanzaextra=\bigbreak|
 
(on peut ajouter bcp de chose: voir le manuel)
les nouvelles commande de maïeul > pour avoir le crochet

si on ne fait que des vers sans indentation> 0 partout (ex: faire des "stanza" de 10 vers .. ) S'il y a moins de vers qu'indiqué dans stanzaindents, pas grave.

\subsubsection{Aller plus loin}

Comme on peut le voir dans les exemples précédents, Ledmac numérote par défaut  une ligne sur cinq. On peut changer cela très simplement avec les commandes suivantes:
\cs{firstlinenum}\marg{nbre} et \cs{linenumincrement}\marg{nbre}.
L'argument \arg{nbre} de la commande \cs{firstlinenum} indique quelle est  la première ligne qui sera numérotée ; celui de la commande \cs{linenumincrement} définit la fréquence avec laquelle les lignes seront numérotés. On place ces commande après \cs{beginnumbering}. 

Ainsi, si l'on veut numéroter toutes les lignes en commençant par la première, il faut mettre \cs{linenumincrement}\marg{1} et \cs{firstlinenum}\marg{1} 


\bigbreak

-faire des "sous-numérotation
> avec \cs{firstsublinenum} 
et \cs{sublinenumincrement}

changer le numéro des lignes
\cs{setline}\marg{num} and \cs{advanceline}\marg{num} > modifier le numéro d'une ligne 
setline> (la ligne d'après> + 1..)
\cs{skipnumbering} > ne pas prendre en compte dans la numérotation telle ligne

- où apparissent les numéro des ligne et comment: %\leftlinenum \rightlinenum \linenumsep \linenumberstyle \sublinenumberstyle


Un moyen pour ne pas encombrer la mémoire qd texte trop long : faire de plus petites sections numérotées. Mais si on met endnumbering ,  avec beginnumbering on recommencera la numérotation à zéro.  Utiliser à la place pausenumbering - resumenumbering > avec resume numbering la nmérotation reprend où elle s'était arrêté. Si on utilise ces commande essentiellement pour des question de mémoire conseil de faire une commande exprès: \verb|\newcommand{\memorybreak}{\pausenumbering\resumenumbering}|> plus qu'à mettre memorybreak de temps en temps dans le texte ..

\cs{lineation}\marg{arg} > \arg{page} > numérotation recommence à chaque page \arg{section} (par défut) : numérotation recommence à chaque section.
Possible aussi de changer l'endroit où apparit le numéro de page (par défaut ds la marge de gauche): \cs{linenummargin}\marg{arg}, dt les arguments peuvent être left, right, inner, ou outer

\cs{startsub} \cs{endsub} > ligne numérotés 10.1, 10.2, 10.3,.. et non 10, 11, 12 

On peut aussi changer façon dont apparaissent es numéro des lignes (voir doc)



\subsection{L'apparat critique}

Les notes de bas de page se présentent de cette façon:  \cs{Afootnote}\marg{texte}. Il y en a 5 types, de \cs{Afootnote} à \cs{Efootnote}


Ce type de notes appellent un \enquote{lemme}, c'est-à-dire une partie du texte annoté qui doit reprise dans la note de bas de page, précédée du numéro de la ou des lignes correspondantes. 

La note de bas de page est appelée de la façon suivante:  \cs{edtext}\marg{lemme}\marg{commande}. L'argument \arg{commande} contient l'appel à la note: \cs{Afootnote}, \cs{Bfootnote}.

Il est aussi possible d'utiliser  des  notes de bas de page \enquote{normales}, appelées par un numéro dans le texte. Il y en a là aussi cinq sortes: de \cs{footnoteA} à \cs{footnoteB}.

Dans les notes de type \cs{Afootnotes}\dots, lorsque ce \enquote{lemme} est trop grand, on peut choisir de l'abbréger. On utilise pour cela la commande suivante: 
\cs{edtext}\marg{le lemme trop long}\{\cs{lemma}\marg{le lemme raccourci}\cs{Bfootnote\marg{la note}}\}. 

\begin{plusloins}
Il est aussi possible de mettre des notes de fin. Là encore, cinq sortes possibles:  de \cs{Aendnote} à \cs{Eendnote}.
\end{plusloins}

Dans l'exemple suivant, nous avons utilisé deux types de notes avec lemme (dont une où j'ai mis un lemme \enquote{raccourci}), et  un type de note sans lemme:


\begin{latexcode}
\setstanzaindents{0,0,1,0,1,0,1,0,1}
\stanza
Quando erit illa dies, cum nostrum intrabis in \edtext{ortum}
{\Afootnote{hortum, \textit{F}}},&
 Atque leges nostras ungue libente rosas?\footnoteA{In exilio}&
Et tua magna sitis mage seu \edtext{mage crescere}
{\Afootnote{mage se accrescere \textit{G}}} gliscet,&
 Dum quod semper amas, carmine plenus eris.&
\edtext{Si qua istis fuerint, ut erunt, uitiosa camenis}
{\lemma{Si \dots camenis}\Bfootnote{\textit{Ov. Trist. IV},
1 Si qua meis fuerint, ut erunt, vitiosa libellis, parce}},&
 Parce, precor : scriptor non mihi doctus inest.&
Quaeso, tuum nobis fidum transmitte ministrum,&
 Qui tua grata mihi perferat orsa, uale.\&
\end{latexcode}

On obtiens alors ceci: 

\bigbreak

\begin{minipage}{\textwidth}
\beginnumbering 
\setlinenum{224}
\firstlinenum{225}
\linenumincrement{5}
\setstanzaindents{0,0,1,0,1,0,1,0,1}
\stanza
Quando erit illa dies, cum nostrum intrabis in \edtext{ortum}{\Afootnote{hortum, \textit{F}}},&
 Atque leges nostras ungue libente rosas?\footnoteA{In exilio}&
Et tua magna sitis mage seu \edtext{mage crescere}{\Afootnote{mage se accrescere \textit{G}}} gliscet,&
 Dum quod semper amas, carmine plenus eris.&
\edtext{Si qua istis fuerint, ut erunt, uitiosa camenis}{\lemma{Si \dots camenis}\Bfootnote{\textit{Ov. Trist. IV},1 Si qua meis fuerint, ut erunt, vitiosa libellis}},&
 Parce, precor : scriptor non mihi doctus inest.&
Quaeso, tuum nobis fidum transmitte ministrum,&
 Qui tua grata mihi perferat orsa, uale.\&
\endnumbering
\end{minipage}
\bigbreak

\begin{attention}
Il faut compiler deux fois pour obtenir le numéro des lignes dans l'apparat critique.
\end{attention}



Il est conseillé de s'aider en changeant le nom des types de notes, en indiquant par exemple dans son préambule: 

\noindent \verb|\let\variantes=\Afootnote| \\
\verb|\let\citations=\Bfootnote| \\
\verb|\let\eclaircissements=\footnoteA| \\
Et ainsi de suite\dots 

Mais il est plus conseillé de créer des commandes personnelles pour simplifier plus encore  (et surtout clarifier) la rédaction d'un apparat critique; par exemple:

\begin{latexcode}
\usepackage{ifthen, xargs}
\newcommandx*\variantes[3][2]{\edtext{#1}{%
    \ifthenelse{\equal{#2}{}}{}{\lemma{#2}}
\Afootnote{#3}}}
\end{latexcode}

Cette commande est un peu plus complexe parce qu'elle fait appel aux packages \packagenoidx{xargs}\sindex[pkg]{xargs} et \packagenoidx{ifthen}\sindex[pkg]{ifthen}. Le premier argument est le lemme; le deuxième argument, optionnel (ce qu'indique, dans la commande, l'argument [2]), contient le lemme raccourci; enfin le dernier argument contient l'annotation. La commande peut donc se résumer ainsi : \cs{variantes}\marg{lemme}\oarg{lemme plus court}\marg{annotation} : ce qui est, il faut le reconnaître, plus simplement utilisable que \cs{edtext}\marg{le lemme trop long}\{\cs{lemma}\marg{le lemme raccourci}\cs{Bfootnote\marg{la note}}\}


(Mettre un renvoi pour xargs et ifthen)

 






\section{Mettre deux textes en vis-à-vis: le package \packagenoidx{ledpar}\sindex[pkg]{ledpar}}

\prealable{
Le package \package{ledpar}, qui sert à mettre un texte et sa traduction en vis-à-vis, fonctionne avec \package{ledmac}. Tout ce qui concerne l'apparat critique et la numérotation dans \package{ledmac} est ainsi valable ici aussi. Nous considérons donc, pour éviter les redites, que vous avez lu ce qui précède.}

\subsection{Principes}

\pakage{ledmac} permet d'obtenir très facilement deux textes en vis-à-vis; c'est donc un package particulièrement utile lorsque l'on veut faire de l'édition bilingue.

Son principe de base est simple: on place des textes numérotés (inscrits entre \cs{beginnumbering} et \cs{endnumbering}) dans les environnements \enviro{Leftside} pour le texte de gauche,  \enviro{Rightside} pour le texte de droite.

\package{ledmac} fait correspondre en vis-à-vis chaque \enquote{boite} d'un texte à la boite correspondante de l'autre texte. Pour la poésie,  chaque vers  (terminé par \ampersand ), est une boite;  en prose, les boites sont délimitées par  \cs{pstart} et un \cs{pend}.  Il est recommandé, en prose, de mettre chaque paragraphe dans une boite, pour obtenir une synchronisation la plus fine possible --- donc de débuter chaque paragraphe par \cs{pstart} et de finir par \cs{pend}. 


\package{ledmac} peut mettre les textes sur deux colonnes ou sur deux pages en vis-à-vis (dans ce cas-là, le texte de gauche est toujours imprimé, bien sûr, sur une page paire).
On utilise, dans le premier cas, l'environnement \enviro{pairs}, et l'environnement \enviro{pages} dans le second.

Les commandes \cs{Columns} ou \cs{Pages}, selon qu'on soit dans l'environnement \enviro{pairs} ou \enviro{pages}, indiquent à \latex qu'il faut imprimer les boites jusqu'ici gardées en mémoire. 



\bigbreak

Résumons!

Pour mettre deux textes en vis-à-vis sur deux colonnes, on utilise le code suivant: 

\begin{latexcode}

\begin{pages}  % On indique qu'on veut des textes en vis-à-vis sur deux pages
\begin{Leftside} % Texte de la page de gauche
 \beginnumbering % On débute la numérotation
 \pstart % Ici, on est en prose: donc \pstart et \pend
 
Le texte dans une langue 
 
 \pend
 \endnumbering  % Fin de la numérotation
 \end{Leftside} % On en a fini avec le texte de gauche 
 
 \begin{Rightside}  % Et on recommence la même chose avec le texte de droite
 \beginnumbering
 \pstart
 
 Le texte dans une autre langue
 
 \pend
 \endnumbering
 \end{Rightside} 
 \Pages

  \end{pages} % Fin la composition en parallèle.
\end{latexcode}


On obtient parfois le message d'erreur \enquote{Too many \cs{pstart} without printing}. Pas de panique! Cela signifie qu'il y a trop de boites en mémoire: \latex  doit en imprimer quelques-unes avant de pouvoir continuer.  Il y a deux solutions possible à cela.

La première solution consiste à  augmenter le nombre de boites que \package{ledpar} peut garder en mémoire, en mettant dans le préambule la commande \cs{maxchunks}\marg{nbre}, où \arg{nbre} est le nombre de boites en mémoire. Par défaut, ce nombre est de dix. Il suffit donc de l'augmenter  pour qu'il soit égal ou supérieur au nombre de boites de son  texte.


Avec la deuxième solution (que l'on peut d'ailleurs coupler avec la première), on  coupe son texte en plusieurs grands ensembles de boites (c'est-à-dire en plusieurs environnements \enviro{Leftside} et \enviro{Rightside}, se terminant chacun par \cs{Columns} ou \cs{Pages}).  Cette solution est préférable pour les longs textes. Les divisions internes du textes se reflètent alors dans les environnements \enviro{Leftside} et \enviro{Rightside}.   Mais si l'on met simplement :

\begin{latexcode}
\begin{pages}  
    \begin{Leftside}  \beginnumbering 
La première partie du texte en langue originale
    \endnumbering  \end{Leftside} 
 
    \begin{Rightside} \beginnumbering
La traduction de la première partie
    \endnumbering \end{Rightside} 
 \Pages
 
    \begin{Leftside} \beginnumbering  
La deuxième partie du texte 
    \endnumbering  \end{Leftside} 
 
    \begin{Rightside}  \beginnumbering
La traduction de la deuxième partie
    \endnumbering \end{Rightside} 
 \Pages

  \end{pages}
\end{latexcode}

on se retrouve avec une numérotation qui recommence à zéro pour la deuxième partie du texte. 

La commande \cs{memorydump} permet de résoudre ce problème. Elle équivaut en fait à un \cs{endnumbering} immédiatement suivit d'un \cs{beginnumbering}. Il faut donc mettre: 

\begin{latexcode}
\begin{pages}  
    \begin{Leftside}  \beginnumbering 
La première partie du texte en langue originale
 \end{Leftside} % On n'a pas mis \endnumbering ici!...
 
\begin{Rightside} \beginnumbering
La traduction de la première partie
 \end{Rightside} % et là non plus...
 \Pages
 
    \begin{Leftside} \memorydump % et, ici, pas de \beginnumbering..  
La deuxième partie du texte 
    \endnumbering  \end{Leftside}
    
    \begin{Rightside}  \memorydump %...car \memorydump s'en charge!
La traduction de la deuxième partie
    \endnumbering \end{Rightside}   %ne pas oublier de mettre 
% tout de même \endnumbering quand on arrive à la fin ..
 
 \Pages

  \end{pages}
\end{latexcode}

Ainsi, la numérotation du texte se fait en continue entre la première partie et la deuxième partie.







\subsection{Personnaliser}


(Bof! trouver autre titre)



on peut changer la séparatiosn entre les colonnes

la nouvelle commande pour empêcher les blancs

les "flags": Its default definition is: \newcommand*{\Rlineflag}{R} This may be useful for parallel columns but for parallel pages it might be more appropriate to redefine it as:
\renewcommand*{\Rlineflag}{}.

The initial lan- guage selected for the right text is the babel package’s default. Also, it is the last \selectlanguage in a side that controls the language used in any notes for that
side when they get printed. If you are using multilingual notes then it is probably safest to explicitly specify the language(s) for each note rather than relying on the language selection for the side. The right side language is also applied to the right side line numbers.
